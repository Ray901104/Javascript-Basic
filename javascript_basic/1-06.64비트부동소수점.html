<!DOCTYPE html>
<html>
<head>
    <title>Document</title>
</head>
<body>
    <script>
        let x = 0.1 + 0.2;
        // console.log(x); //0.30000000000000004

        //64비트 부동소수점

        // console.log(1/2);
        // console.log(2/3);

        //0.1 = 1/10
        //0.2 = 1/5

        console.log((0.1).toString(2));
        //0.0001100110011001100110011001100110011001100110011001101
        //64비트부동소수점
        
        //첫 1비트 - 부호 양수 0 음수 1
        //이후 11비트 - 지수부 = 2^(11-1)-1 + m(1까지 몇번 옮겼냐, 왼쪽으로 양수 오른쪽으로 음수)
        //2^10 - 1 - 4 = 1024 - 1 - 4 = 1019
        //나머지 52비트 - 가수부

        console.log((1019).toString(2));
        //01111111011

        console.log((0.2).toString(2));
        //0.001100110011001100110011001100110011001100110011001101
        //1비트 - 0
        //11비트 - 1024 - 1 - 3 = 1020
        console.log((1020).toString(2));
        //01111111100

        //0.2 ==> 0.001100110011001100110011001100110011001100110011001101
        //0.1 ==> 0.0001100110011001100110011001100110011001100110011001101
        //        0.0100110011001100110011001100110011001100110011001101

        //2진법 -> 10진법 변환
        console.log(parseInt('0100110011001100110011001100110011001100110011001101', 2) * Math.pow(2, -52));

        //연산이 필요한 어플리케이션 개발에는 64비트부동소수점으로 인한 연산 오류를 방지하기 위해
        //BigNumber.js
        //Big.js
        //Decimal.js
        //등의 외부라이브러리를 사용하는 것을 권장

        let x2 = 9999999999999999;
        //       9007199254740991 //MAX_SAFE_INTEGER
        console.log(x2); //전혀 다른 값이 찍힘
        console.log(Number.MAX_SAFE_INTEGER);

    </script>
</body>
</html>